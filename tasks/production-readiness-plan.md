# Split Second - Production Readiness Plan

Generated by deep-scan of all source files. Every item is verified against actual code.

---

## Tier 1: Test Infrastructure (Setup)

### 1.1 Install Test Packages
- **What**: Install jest, jest-expo, @testing-library/react-native, @types/jest
- **Command**: `npm install --save-dev jest jest-expo @testing-library/react-native @types/jest --legacy-peer-deps`
- **Complexity**: S

### 1.2 Create `jest.config.js`
- Preset: jest-expo
- transformIgnorePatterns for Expo SDK 54
- **Complexity**: S

### 1.3 Create Mock Files in `__mocks__/`
- expo-haptics, expo-av, expo-notifications, expo-device, expo-localization
- expo-sharing, expo-file-system, expo-splash-screen, expo-linking
- react-native-view-shot, react-native-reanimated, react-native-gesture-handler
- @react-native-async-storage/async-storage, @supabase/supabase-js
- **Complexity**: M

### 1.4 Add package.json Scripts
- test, test:watch, test:coverage, lint, lint:fix, typecheck
- **Complexity**: S

---

## Tier 2: Unit Tests (Pure Functions)

### 2.1 `lib/streaks.ts`
- `getNextMilestone(currentStreak)`: 0->3, 3->7, 100->null
- `isNewMilestone(currentStreak)`: 3=true, 4=false
- Mock: None (pure)

### 2.2 `lib/i18n.ts`
- `t(key, params)`: EN/TR, param substitution
- `getLang()`, `getDateLocale()`, `localizeQuestion(q)`
- Mock: expo-localization

### 2.3 `lib/deeplink.ts`
- `buildChallengeLink(date)`: format validation
- Mock: None

### 2.4 `lib/insights.ts`
- `getCategoryInsight(category)`: known/unknown categories
- Mock: expo-localization (via i18n)

### 2.5 `constants/colors.ts`
- All keys exist, all values valid hex

---

## Tier 3: Hook Integration Tests

### 3.1 `hooks/useCountdownTimer.ts` — fake timers, onExpire, active flag
### 3.2 `hooks/useDailyCountdown.ts` — HH:MM:SS format, secondsLeft range
### 3.3 `hooks/useAuth.ts` — userId after auth, loading states
### 3.4 `hooks/useVote.ts` — hasVoted=false initial, vote() updates state
### 3.5 `hooks/useOnboarding.ts` — AsyncStorage read/write

---

## Tier 4: ESLint Configuration

- Install: eslint, @typescript-eslint/eslint-plugin, @typescript-eslint/parser, eslint-plugin-react, eslint-plugin-react-hooks
- Rules: no-explicit-any:warn, no-unused-vars:warn, exhaustive-deps:warn, no-console:warn

---

## Tier 5: Code Quality Fixes

- Unused imports in 6 files
- `any` types in useTodayQuestion.ts, share.ts
- console.log/error in 9 lib files
- useEffect dependency issues in 4 hooks
- ErrorBoundary component
- Missing error handling in async flows

---

## Tier 6: Manual Documentation
- Sound files, .env.example, DB migration docs, forwardRef displayName

## Tier 7: Git Hygiene
- .gitignore additions (coverage/, .eas/, etc.)
- Commit untracked directories
